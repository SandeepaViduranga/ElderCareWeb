<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Elder Health Report</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="assets/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- End layout styles -->
    <link rel="shortcut icon" href="assets/images/favicon.png"/>
</head>
<body>
<div class="container-scroller">
    <!-- partial:partials/_navbar.html -->
    <nav class="navbar default-layout-navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
        <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
            <a class="navbar-brand brand-logo" href="index.html"><img src="assets/images/logo.png" alt="logo"/></a>
            <a class="navbar-brand brand-logo-mini" href="index.html"><img src="assets/images/logo-mini.png"
                                                                           alt="logo"/></a>
        </div>
        <div class="navbar-menu-wrapper d-flex align-items-stretch">
            <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
                <span class="mdi mdi-menu"></span>
            </button>
            <ul class="navbar-nav navbar-nav-right">
                <li class="nav-item d-none d-lg-block full-screen-link">
                    <a class="nav-link">
                        <i class="mdi mdi-fullscreen" id="fullscreen-button"></i>
                    </a>
                </li>
                <li class="nav-item nav-logout d-none d-lg-block">
                    <a class="nav-link" href="PHP/doctorLogout.php">
                        <i class="mdi mdi-power"></i>
                    </a>
                </li>
            </ul>
            <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button"
                    data-toggle="offcanvas">
                <span class="mdi mdi-menu"></span>
            </button>
        </div>
    </nav>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_sidebar.html -->
        <nav class="sidebar sidebar-offcanvas" id="sidebar">
            <ul class="nav">
                <li class="nav-item nav-profile">
                    <a href="#" class="nav-link">
                        <div class="nav-profile-image">
                            <img src="assets/images/faces/face1.jpg" alt="profile">
                            <span class="login-status online"></span>
                            <!--change to offline or busy as needed-->
                        </div>
                        <div class="nav-profile-text d-flex flex-column">
                            <span class="font-weight-bold mb-2" id="userName">Hi, Doctor</span>
                        </div>
                        <i class="mdi mdi-bookmark-check text-success nav-profile-badge"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="collapse" href="#general-pages" aria-expanded="false"
                       aria-controls="general-pages">
                        <span class="menu-title">Doctor</span>
                        <i class="menu-arrow"></i>
                        <i class="mdi mdi-contacts menu-icon"></i>
                    </a>
                    <div class="collapse" id="general-pages">
                        <ul class="nav flex-column sub-menu">
                            <li class="nav-item"><a class="nav-link" href="doctor_health_records.html"> Health
                                Records </a></li>
                            <li class="nav-item"><a class="nav-link" href="doctor_notifications.html">
                                Notifications </a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </nav>
        <!-- partial -->
        <div class="main-panel">
            <div class="content-wrapper">
                <div class="page-header">
                    <h3 class="page-title">
                <span class="page-title-icon bg-gradient-primary text-white mr-2">
                  <i class="mdi mdi-home"></i>
                </span> Elder Health Report
                    </h3>
                </div>
                <div class="chartAreaWrapper">
                    <canvas id="myChart"></canvas>
                </div>
                <!-- content-wrapper ends -->
                <!-- partial:partials/_footer.html -->
                <footer class="footer">
                    <div class="d-sm-flex justify-content-center justify-content-sm-between">
                        <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright Â© 2021 <a
                                href="https://www.bootstrapdash.com/" target="_blank">BootstrapDash</a>. All rights reserved.</span>
                        <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted & made with <i
                                class="mdi mdi-heart text-danger"></i></span>
                    </div>
                </footer>
                <!-- partial -->
            </div>
            <!-- main-panel ends -->
        </div>
        <!-- page-body-wrapper ends -->
    </div>
</div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="assets/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="assets/vendors/chart.js/Chart.min.js"></script>
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="assets/js/off-canvas.js"></script>
    <script src="assets/js/hoverable-collapse.js"></script>
    <script src="assets/js/misc.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page -->
    <script src="assets/js/dashboard.js"></script>
    <script src="assets/js/todolist.js"></script>
    <!-- End custom js for this page -->
    <script language="javascript" src="js/elder_health.js"></script>
    <script language="javascript">
        $(document).ready(function () {
            var userName = getUserName();
            document.getElementById("userName").textContent = "Dr. ".concat(userName);
            var url_string = location.href
            var url = new URL(url_string);
            var elderNIC = url.searchParams.get("elderNIC");
            console.log(elderNIC);
            //use NIC to load graph related to specific elder
        });

        function getComboA(selectObject) {
            var value = selectObject.value;
            var LC = LCDrop.value;
            var myChart = document.getElementById("myChart").getContext("2d");
            // Global Options
            Chart.defaults.global.defaultFontFamily = "Lato";
            Chart.defaults.global.defaultFontSize = 18;
            Chart.defaults.global.defaultFontColor = "#777";
            //console.log(value);
            $.ajax({
                url: "php/data.php",
                method: "post",
                data: "loadAnalizeTRID=" + TRIDD + "&loadAnalizeLC=" + LC + "&loadAnalizeCom=" + value,
            }).done(function (fileData) {
                //console.log(fileData);
                fileDataResult = JSON.parse(fileData);
                //console.log(fileDataResult);
                dataHeadings = ["LV-R", "LV-Y", "LV-B", "HV-R", "HV-Y", "HV-B"]
                subsections1 = []
                subsections2 = []
                subsections3 = []
                subsections4 = []
                subsections5 = []
                subsections6 = []
                subsections7 = []

                fileDataResult.forEach((item) => {
                    subsections1.push(item.date)
                    item.data.forEach((val, index) => {

                        switch (index) {
                            case 0:
                                subsections2.push(val)
                                break
                            case 1:
                                subsections3.push(val)
                                break
                            case 2:
                                subsections4.push(val)
                                break
                            case 3:
                                subsections5.push(val)
                                break
                            case 4:
                                subsections6.push(val)
                                break
                            case 5:
                                subsections7.push(val)
                                break
                        }
                    })
                });

                var massPopChart = new Chart(myChart, {
                    type: "line", // bar, horizontalBar, pie, line, doughnut, radar, polarArea
                    data: {
                        labels: subsections1,
                        datasets: [
                            {
                                label: dataHeadings[0],
                                data: subsections2,
                                backgroundColor: "rgba(255, 99, 132, 0.6)",
                                borderWidth: 3,
                                fill: false,
                                borderColor: "rgba(255, 99, 132, 0.6)",
                                hoverBorderWidth: 3,
                                hoverBorderColor: "#000",
                            },
                            {
                                label: dataHeadings[1],
                                data: subsections3,
                                backgroundColor: "rgba(75, 192, 192, 0.6)",
                                borderWidth: 3,
                                fill: false,
                                borderColor: "rgba(75, 192, 192, 0.6)",
                                hoverBorderWidth: 3,
                                hoverBorderColor: "#000",
                            },
                            {
                                label: dataHeadings[2],
                                data: subsections4,
                                backgroundColor: "rgba(255, 205, 86)",
                                borderWidth: 3,
                                fill: false,
                                borderColor: "rgba(255, 205, 86)",
                                hoverBorderWidth: 3,
                                hoverBorderColor: "#000",
                            },
                            {
                                label: dataHeadings[3],
                                data: subsections5,
                                backgroundColor: "rgba(201, 203, 207)",
                                borderWidth: 3,
                                fill: false,
                                borderColor: "rgba(201, 203, 207)",
                                hoverBorderWidth: 3,
                                hoverBorderColor: "#000",
                            },
                            {
                                label: dataHeadings[4],
                                data: subsections6,
                                backgroundColor: "rgba(54, 162, 235)",
                                borderWidth: 3,
                                fill: false,
                                borderColor: "rgba(54, 162, 235)",
                                hoverBorderWidth: 3,
                                hoverBorderColor: "#000",
                            },
                            {
                                label: dataHeadings[5],
                                data: subsections7,
                                backgroundColor: "rgba(236, 3, 252, 0.6)",
                                borderWidth: 3,
                                fill: false,
                                borderColor: "rgba(236, 3, 252, 0.6)",
                                hoverBorderWidth: 3,
                                hoverBorderColor: "#000",
                            },
                        ],
                    },
                    options: {
                        plugins: {
                            autocolors: false,
                            annotation: {
                                annotations: {
                                    line1: {
                                        type: "line",
                                        yMin: 0.5,
                                        yMax: 0.5,
                                        borderColor: "rgb(255, 99, 132)",
                                        borderWidth: 2,
                                    },
                                },
                            },
                        },
                        title: {
                            display: true,
                            text: "TR Vibrations",
                            fontSize: 25,
                        },
                        legend: {
                            display: true,
                            position: "right",
                            labels: {
                                fontColor: "#000",
                            },
                        },
                        layout: {
                            padding: {
                                left: 50,
                                right: 0,
                                bottom: 0,
                                top: 0,
                            },
                        },
                        tooltips: {
                            enabled: true,
                        },
                    },
                });
            });
        }
    </script>
</body>
</html>